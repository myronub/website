<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>myro</title>
<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<style>
:root {
  --bg: #000;
  --text: #fff;
  --accent: #d8d8d8;
  --accent2: #181818;
  --accent3: #45484c;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  font-family: 'Arial', sans-serif;
  cursor: none; /* hide default cursor */
}

body {
  background: var(--bg);
  color: var(--text);
  line-height: 1.5;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  min-height: 100vh;
  overflow: hidden;
  padding-bottom: 80px; /* space for player */
}

.container {
  max-width: 700px;
  transform: translate(-10em,-5em);
  z-index: 1;
}

h1 {
  font-size: 3rem;
  margin-bottom: 1rem;
  animation: fadeIn 1s ease-in-out forwards;
}

p {
  color: var(--accent);
  font-size: 1.1rem;
  animation: fadeIn 1.5s ease-in-out forwards;
  animation-delay: 0.3s;
  opacity: 0;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

a { color: var(--text); text-decoration: none; }
a:hover { color: var(--accent); }

.tooltip {
  position: relative;
  display: inline-block;
  cursor: pointer;
  color: #819ab3;
  text-decoration: none;
}

.tooltip::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 125%;
  left: 50%;
  transform: translateX(-50%);
  background-color: #080808;
  color: #fff;
  padding: 0.5em;
  border-radius: 4px;
  white-space: nowrap;
  font-size: 0.9em;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.1s ease-in-out;
}

.tooltip:hover::after { opacity: 1; }

.btn {
  padding: 0.5em 2em;
  border: solid 2px var(--accent2);
  border-radius: 0.5em;
  margin: 0;
  color: var(--accent);
}

.btn:hover { border: solid 2px #819ab3; }

/* GIF */
.gif-container {
  position: absolute;
  top: 50%;
  right: 100px;
  transform: translateY(-50%);
  z-index: 2;
  pointer-events: auto;
}

.gif-container img {
  max-width: 300px;
  border-radius: 0.5em;
  user-drag: none;
  user-select: none;
  pointer-events: none;
}

/* Custom Cursor */
.cursor {
  position: fixed;
  top: 0;
  left: 0;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  pointer-events: none;
  transform: translate(-50%, -50%);
  background: white;
  mix-blend-mode: difference;
  transition: width 0.2s ease, height 0.2s ease;
  z-index: 9999;
}
.cursor.big { width: 50px; height: 50px; }

/* Minimalistic player */
.player {
  position: fixed;
  bottom: 0;
  width: 100%;
  background: #111;
  color: var(--accent);
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 10px 0;
  font-size: 1rem;
  font-style: italic;
  z-index: 10;
}

/* Visualizer */
#visualizer {
  position: fixed;
  bottom: 300px;        /* <-- your requested offset */
  left: 50%;
  transform: translateX(-50%);
  width: 320px;         /* CSS size; JS will scale for crispness */
  height: 60px;
  pointer-events: none; /* don't block clicks */
  opacity: 0.9;
  z-index: 9;
  filter: drop-shadow(0 2px 8px rgba(255,255,255,0.07));
}

/* Right-click popup (custom context) */
.context-pop {
  position: fixed;
  background: #111;
  color: #fff;
  padding: 0.5em 1em;
  border: 1px solid #fff;
  border-radius: 5px;
  z-index: 9998;
  font-size: 0.9rem;
  box-shadow: 0 0 10px rgba(255,255,255,0.2);
  opacity: 1;
  transition: opacity 0.5s ease;
}
.context-pop.fade { opacity: 0; }
</style>
</head>
<body>

<div class="container">
  <h1>myro</h1>
  <p>
    casual gamer from
    <img src="https://upload.wikimedia.org/wikipedia/commons/1/10/Flag_of_Finland.png"
         alt="where do you fucking think"
         style="height:0.9em; vertical-align:middle; margin:0 0.3em; border-radius:3px;">
    and soon coder @
    <a href="https://github.com/myronub" class="tooltip" data-tooltip="@myronub" target="_blank">[github]</a>
  </p>
  <p>reach out at
    <a href="https://discord.com/users/1405979887411662939" class="tooltip" data-tooltip="@cupidtakeme / @myronub" target="_blank">discord</a>
  or
  </p><br>
  <p>
    <a class="btn" href="http://hope-shannon.gl.at.ply.gg:4479/">watchtube (check it out!)</a>
    <a class="btn" href="mailto:myro@waifu.club">email</a>
  </p>
</div>

<div class="gif-container" id="draggableGif">
  <img src="https://i.pinimg.com/originals/35/d9/f6/35d9f643067bdbc5e7e98e3445d834c5.gif" alt="decorative gif" draggable="false">
</div>

<!-- Small visualizer -->
<canvas id="visualizer"></canvas>

<div class="cursor" id="customCursor"></div>

<!-- Minimalistic player -->
<div class="player">
  *пачка сигарет*
</div>

<!-- Audio element -->
<audio id="bgMusic" loop>
  <source src="https://files.catbox.moe/vjahkr.mp3" type="audio/mpeg">
</audio>

<script>
// ===== DRAGGABLE GIF =====
const gif = document.getElementById("draggableGif");
let isDragging = false, mouseX = 0, mouseY = 0;
let gifX = gif.offsetLeft, gifY = gif.offsetTop;
let offsetX = 0, offsetY = 0;

function animateGIF() {
  if (isDragging) {
    gifX += (mouseX - offsetX - gifX) * 0.2;
    gifY += (mouseY - offsetY - gifY) * 0.2;
    gif.style.left = gifX + "px";
    gif.style.top = gifY + "px";
  }
  requestAnimationFrame(animateGIF);
}
animateGIF();

gif.addEventListener("mousedown", e => {
  isDragging = true;
  offsetX = e.clientX - gif.offsetLeft;
  offsetY = e.clientY - gif.offsetTop;
});
document.addEventListener("mouseup", () => { isDragging = false; });
document.addEventListener("mousemove", e => { mouseX = e.clientX; mouseY = e.clientY; });

// ===== SMOOTH CUSTOM CURSOR =====
const cursor = document.getElementById("customCursor");
let cursorX = 0, cursorY = 0, targetX = 0, targetY = 0;

document.addEventListener("mousemove", e => {
  targetX = e.clientX;
  targetY = e.clientY;
});

function animateCursor() {
  cursorX += (targetX - cursorX) * 0.2;
  cursorY += (targetY - cursorY) * 0.2;
  cursor.style.left = cursorX + "px";
  cursor.style.top = cursorY + "px";
  requestAnimationFrame(animateCursor);
}
animateCursor();

document.addEventListener("mouseover", e => {
  if (e.target.closest("p, a, .tooltip, .btn")) cursor.classList.add("big");
});
document.addEventListener("mouseout", e => {
  if (e.target.closest("p, a, .tooltip, .btn")) cursor.classList.remove("big");
});

// ===== AUDIO: start on first interaction =====
const music = document.getElementById("bgMusic");
let audioStarted = false;
function startMusic() {
  if (!audioStarted) {
    music.play().catch(err => console.log("Autoplay blocked:", err));
    audioStarted = true;
    initVisualizer(); // start visualizer at the same time
    document.removeEventListener("click", startMusic);
    document.removeEventListener("keydown", startMusic);
  }
}
document.addEventListener("click", startMusic);
document.addEventListener("keydown", startMusic);

// ===== SMALL VISUALIZER (Web Audio API) =====
let audioCtx, analyser, srcNode, vizStarted = false;
const canvas = document.getElementById('visualizer');
const ctx = canvas.getContext('2d');

function sizeCanvasForDPR() {
  const dpr = Math.max(1, window.devicePixelRatio || 1);
  const rect = canvas.getBoundingClientRect();
  canvas.width = Math.round(rect.width * dpr);
  canvas.height = Math.round(rect.height * dpr);
  ctx.setTransform(dpr, 0, 0, dpr, 0, 0); // scale drawing to CSS pixels
}
sizeCanvasForDPR();
window.addEventListener('resize', sizeCanvasForDPR);

function initVisualizer() {
  if (vizStarted) return;
  vizStarted = true;

  audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  analyser = audioCtx.createAnalyser();
  analyser.fftSize = 512; // small, responsive
  analyser.smoothingTimeConstant = 0.85;

  srcNode = audioCtx.createMediaElementSource(music);
  srcNode.connect(analyser);
  analyser.connect(audioCtx.destination);

  drawViz();
}

function drawViz() {
  const bufferLength = analyser.frequencyBinCount; // 256
  const dataArray = new Uint8Array(bufferLength);
  const W = canvas.clientWidth;
  const H = canvas.clientHeight;

  function render() {
    analyser.getByteFrequencyData(dataArray);

    ctx.clearRect(0, 0, W, H);

    const barCount = 48; // compact
    const step = Math.floor(bufferLength / barCount);
    const barWidth = (W / barCount) * 0.8;
    const gap = (W / barCount) * 0.2;
    const baseline = H - 2;

    for (let i = 0; i < barCount; i++) {
      const v = dataArray[i * step] / 255;     // 0..1
      const barHeight = Math.max(2, v * (H - 6));
      const x = i * (barWidth + gap);
      const y = baseline - barHeight;

      // draw minimal white bars with slight transparency
      ctx.fillStyle = 'rgba(255,255,255,0.85)';
      ctx.fillRect(x, y, barWidth, barHeight);

      // subtle top cap
      ctx.fillStyle = 'rgba(255,255,255,1)';
      ctx.fillRect(x, y - 1, barWidth, 2);
    }

    requestAnimationFrame(render);
  }
  render();
}

// ===== Custom right-click popup with fade + single instance =====
let currentPopup = null;
document.addEventListener("contextmenu", function(e) {
  e.preventDefault();

  if (currentPopup) {
    currentPopup.remove();
    currentPopup = null;
  }

  const pop = document.createElement('div');
  pop.className = 'context-pop';
  pop.textContent = 'hello bughunter ;)';
  pop.style.left = e.clientX + 'px';
  pop.style.top = e.clientY + 'px';
  document.body.appendChild(pop);
  currentPopup = pop;

  // fade out then remove
  setTimeout(() => {
    pop.classList.add('fade');
    setTimeout(() => {
      if (currentPopup === pop) currentPopup = null;
      pop.remove();
    }, 500);
  }, 1500);
});
</script>
</body>
</html>
